/*! UIkit 3.0.0-beta.30 | http://www.getuikit.com | (c) 2014 - 2017 YOOtheme | MIT License */

!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define("uikitlightbox",i):t.UIkitLightbox=i()}(this,function(){"use strict";function t(i){function e(t,i,e,n,s,o){var r=(t=t in A?A[t]:A.slide).show(s);return{dir:s,current:e,next:n,show:function(t,s){var a=this;return void 0===s&&(s=0),t-=Math.round(t*s),this.translate(s),y.all([$.start(e,r[0],t,i),$.start(n,r[1],t,i)]).then(function(){a.reset(),o()},m)},stop:function(){return y.all([$.stop(n),$.stop(e)])},cancel:function(){return y.all([$.cancel(n),$.cancel(e)])},reset:function(){for(var t in r[0])a([n,e[0]],t,"")},forward:function(t){var i=this,s=this.percent();return y.all([$.cancel(n),$.cancel(e)]).then(function(){return i.show(t,s)})},translate:function(i){var o=t.translate(i,s);a(e,o[0]),a(n,o[1])},percent:function(){return t.percent(e,n,s)}}}function n(t){return~~t}if(!t.installed){var s=i.util,o=s.addClass,a=s.css,r=s.filter,h=s.hasClass,l=s.removeClass,u=s.toggleClass,c=(s.$,s.attr),d=s.doc,f=s.fastdom,p=s.getIndex,m=s.noop,g=s.off,v=s.on,x=s.pointerDown,b=s.pointerMove,k=s.pointerUp,w=s.preventClick,y=s.Promise,I=s.requestAnimationFrame,$=s.Transition,_=s.trigger;i.mixin.slideshow={attrs:!0,props:{autoplay:Number,animation:String,transition:String,duration:Number},defaults:{autoplay:0,animation:"slide",transition:"linear",duration:400,index:0,stack:[],threshold:10,percent:0,clsActive:"uk-active"},computed:{slides:function(t){var i=t.clsItem;return r(this.list.children,"."+i)},forwardDuration:function(t){return t.duration/4}},init:function(){var t=this;["start","move","end"].forEach(function(i){var e=t[i];t[i]=function(i){t.prevPos=t.pos,t.pos=(i.touches&&i.touches[0]||i).pageX,e(i)}})},connected:function(){this.startAutoplay()},events:[{name:"click",delegate:function(){return"["+this.attrItem+"]"},handler:function(t){t.preventDefault(),t.current.blur(),this.show(c(t.current,this.attrItem))}},{name:x,delegate:function(){return"."+this.clsItem},handler:"start"},{name:x,handler:"stopAutoplay"},{name:"mouseenter",filter:function(){return this.autoplay},handler:function(){this.isHovering=!0}},{name:"mouseleave",filter:function(){return this.autoplay},handler:function(){this.isHovering=!1}}],methods:{start:function(t){if(!(t.button&&0!==t.button||this.slides.length<2)){t.preventDefault();var i=0;if(this.stack.length){this.percent=this._animation.percent();var e=this._animation.dir;i=this.percent*e,this.stack.splice(0,this.stack.length),this._animation.cancel(),this._animation.translate(Math.abs(i)),this.index=this.getIndex(this.index-e),this.touching=!0}v(d,b,this.move,!0),v(d,k,this.end,!0);var n=this.slides[this.index];this.touch={el:n,start:this.pos+(i?n.offsetWidth*i:0)}}},move:function(t){var s=this;t.preventDefault();var o=this.touch,a=o.start,r=o.el;if(!(this.pos===this.prevPos||!this.touching&&Math.abs(a-this.pos)<this.threshold)){this.touching=!0;var h=(this.pos-a)/r.offsetWidth;if(this.percent!==h){var l=n(this.percent)!==n(h),c=this.getIndex(this.index-n(h)),d=this.slides[c],f=h<0?1:-1,g=p(h<0?"next":"previous",this.slides,c),v=this.slides[g];this.slides.forEach(function(t,i){return u(t,s.clsActive,i===c||i===g)}),l&&this._animation&&this._animation.reset(),this._animation=new e(this.animation,this.transition,d,v,f,m),this._animation.translate(Math.abs(h%1)),this.percent=h,i.update(null,d),i.update(null,v)}}},end:function(t){if(t.preventDefault(),g(d,b,this.move,!0),g(d,k,this.end,!0),this.touching){var i=this.percent;this.percent=Math.abs(this.percent)%1,this.index=this.getIndex(this.index-n(i)),this.percent<.2&&(this.index=this.getIndex(i>0?"previous":"next"),this.percent=1-this.percent,i*=-1),this.show(i>0?"previous":"next",!0),w()}this.pos=this.prevPos=this.touch=this.touching=this.percent=null},show:function(t,n){var s=this;if(void 0===n&&(n=!1),n||!this.touch)if(this.stack[n?"unshift":"push"](t),!n&&this.stack.length>1)2===this.stack.length&&this._animation.forward(this.forwardDuration);else{var a=h(this.slides,"uk-active"),r="next"===t?1:"previous"===t?-1:t<this.index?-1:1;if(t=this.getIndex(t),a&&t===this.index)this.stack[n?"shift":"pop"]();else{var u=a&&this.slides[this.index],c=this.slides[t];_(this.$el,"beforeitemshow",[this,c]),u&&_(this.$el,"beforeitemhide",[this,u]),this.index=t,o(c,this.clsActive),this._animation=new e(u?this.animation:"scale",this.transition,u||c,c,r,function(){u&&l(u,s.clsActive),s.stack.shift(),s.stack.length?I(function(){return s.show(s.stack.shift(),!0)}):s._animation=null,_(s.$el,"itemshown",[s,c]),i.update(null,c),u&&(_(s.$el,"itemhidden",[s,u]),i.update(null,u))}),this._animation.show(this.stack.length>1?this.forwardDuration:this.duration,this.percent),_(this.$el,"itemshow",[this,c]),u&&(_(this.$el,"itemhide",[this,u]),i.update(null,u)),i.update(null,c),f.flush()}}},getIndex:function(t){return void 0===t&&(t=this.index),p(t,this.slides,this.index)},startAutoplay:function(){var t=this;this.stopAutoplay(),this.autoplay&&(this.interval=setInterval(function(){return!t.isHovering&&t.show("next")},this.autoplay))},stopAutoplay:function(){this.interval&&clearInterval(this.interval)}}};var A={fade:{show:function(){return[{opacity:0},{opacity:1}]},percent:function(t){return 1-a(t,"opacity")},translate:function(t){return[{opacity:1-t},{opacity:t}]}},slide:{show:function(t){return[{transform:"translate3d("+-100*t+"%, 0, 0)"},{transform:"translate3d(0, 0, 0)"}]},percent:function(t){return Math.abs(a(t,"transform").split(",")[4]/t.offsetWidth)},translate:function(t,i){return[{transform:"translate3d("+-100*i*t+"%, 0, 0)"},{transform:"translate3d("+100*i*(1-t)+"%, 0, 0)"}]}},scale:{show:function(){return[{opacity:0,transform:"scale3d(0.8, 0.8, 1)"},{opacity:1,transform:"scale3d(1, 1, 1)"}]},percent:function(t){return 1-a(t,"opacity")},translate:function(t){var i=1-.2*t,e=.8+.2*t;return[{opacity:1-t,transform:"scale3d("+i+", "+i+", 1)"},{opacity:t,transform:"scale3d("+e+", "+e+", 1)"}]}},swipe:{show:function(t){return t<0?[{opacity:1,transform:"translate3d(100%, 0, 0)",zIndex:0},{opacity:1,transform:"scale3d(1, 1, 1) translate3d(0, 0, 0)",zIndex:-1}]:[{opacity:.3,transform:"scale3d(0.8, 0.8, 1) translate3d(-20%, 0, 0)",zIndex:-1},{opacity:1,transform:"translate3d(0, 0, 0)",zIndex:0}]},percent:function(t,i,e){var n=e<0?t:i,s=Math.abs(a(n,"transform").split(",")[4]/n.offsetWidth);return e<0?s:1-s},translate:function(t,i){var e;return i<0?(e=1-.2*(1-t),[{opacity:1,transform:"translate3d("+100*t+"%, 0, 0)",zIndex:0},{opacity:.3+.7*t,transform:"scale3d("+e+", "+e+", 1) translate3d("+-20*(1-t)+"%, 0, 0)",zIndex:-1}]):(e=1-.2*t,[{opacity:1-.7*t,transform:"scale3d("+e+", "+e+", 1) translate3d("+-20*t+"%, 0, 0)",zIndex:-1},{opacity:1,transform:"translate3d("+100*(1-t)+"%, 0, 0)",zIndex:0}])}}}}}function i(e){function n(t,i,e){void 0===e&&(e="in"),p(t,"hidden",null),u[e](t,i).then(function(){return"out"===e&&p(t,"hidden","")})}function s(t,i,e,n){return'<iframe src="'+t+'" width="'+i+'" height="'+e+'" style="max-width: 100%; box-sizing: border-box;" frameborder="0" allowfullscreen uk-video="autoplay: '+n+'" uk-responsive></iframe>'}if(!i.installed){e.use(t);var o=e.mixin,a=e.util,r=a.$,h=a.$$,l=a.addClass,u=a.Animation,c=a.ajax,d=a.append,f=a.assign,p=a.attr,m=a.css,g=a.doc,v=a.docEl,x=a.data,b=a.getImage,k=a.hasAttr,w=a.html,y=a.index,I=a.on,$=a.pointerDown,_=a.pointerMove,A=a.removeClass,C=a.Transition,D=a.trigger;e.component("lightbox",{attrs:!0,props:{animation:String,toggle:String,autoplay:Number,videoAutoplay:Boolean},defaults:{animation:void 0,toggle:"a",autoplay:0,videoAutoplay:!1},computed:{toggles:function(t,i){var e=this,n=t.toggle,s=h(n,i);return this._changed=!this._toggles||s.length!==this._toggles.length||s.some(function(t,i){return t!==e._toggles[i]}),this._toggles=s}},disconnected:function(){this.panel&&(this.panel.$destroy(!0),this.panel=null)},events:[{name:"click",delegate:function(){return this.toggle+":not(.uk-disabled)"},handler:function(t){t.preventDefault(),t.current.blur(),this.show(y(this.toggles,t.current))}}],update:function(){this.panel&&this.animation&&(this.panel.$props.animation=this.animation,this.panel.$emit()),this.toggles.length&&this._changed&&this.panel&&(this.panel.$destroy(!0),this._init())},methods:{_init:function(){return this.panel=this.panel||e.lightboxPanel({autoplay:this.autoplay,videoAutoplay:this.videoAutoplay,animation:this.animation,items:this.toggles.reduce(function(t,i){return t.push(["href","caption","type","poster"].reduce(function(t,e){return t["href"===e?"source":e]=x(i,e),t},{})),t},[])})},show:function(t){return this.panel||this._init(),this.panel.show(t)},hide:function(){return this.panel&&this.panel.hide()}}}),e.component("lightbox-panel",{mixins:[o.container,o.togglable,o.slideshow],functional:!0,defaults:{preload:1,videoAutoplay:!1,delayControls:3e3,items:[],cls:"uk-open",clsPage:"uk-lightbox-page",clsItem:"uk-lightbox-item",attrItem:"uk-lightbox-item",template:'<div class="uk-lightbox uk-overflow-hidden"> <ul class="uk-lightbox-items"></ul> <div class="uk-lightbox-toolbar uk-position-top uk-text-right"> <button class="uk-lightbox-toolbar-icon uk-close-large" type="button" uk-close uk-toggle="!.uk-lightbox"></button> </div> <a class="uk-lightbox-button uk-position-center-left uk-position-medium" href="#" uk-slidenav-previous uk-lightbox-item="previous"></a> <a class="uk-lightbox-button uk-position-center-right uk-position-medium" href="#" uk-slidenav-next uk-lightbox-item="next"></a> <div class="uk-lightbox-toolbar uk-lightbox-caption uk-position-bottom uk-text-center"></div> </div>'},created:function(){var t=this;this.$mount(d(this.container,this.template)),this.list=r(".uk-lightbox-items",this.$el),this.toolbars=h(".uk-lightbox-toolbar",this.$el),this.nav=h("a[uk-lightbox-item]",this.$el),this.caption=r(".uk-lightbox-caption",this.$el),this.items.forEach(function(i,e){return d(t.list,'<li class="'+t.clsItem+" item-"+e+'"></li>')})},events:[{name:_+" "+$+" keydown",handler:"showControls"},{name:"click",self:!0,delegate:function(){return"."+this.clsItem},handler:function(t){t.preventDefault(),this.hide()}},{name:"show",self:!0,handler:function(){l(v,this.clsPage)}},{name:"shown",self:!0,handler:function(){l(this.caption,"uk-animation-slide-bottom"),p(this.toolbars,"hidden",""),p(this.nav,"hidden",""),this.showControls()}},{name:"hide",self:!0,handler:function(){A(this.caption,"uk-animation-slide-bottom"),p(this.toolbars,"hidden",""),p(this.nav,"hidden","")}},{name:"hidden",self:!0,handler:function(){A(v,this.clsPage)}},{name:"keydown",el:function(){return g},handler:function(t){if(this.isToggled(this.$el))switch(t.keyCode){case 27:this.hide();break;case 37:this.show("previous");break;case 39:this.show("next")}}},{name:"toggle",handler:function(t){t.preventDefault(),this.toggle()}},{name:"beforeitemshow",self:!0,handler:function(){this.isToggled()||this.toggleNow(this.$el,!0)}},{name:"itemshow",self:!0,handler:function(){var t=this,i=this.getItem().caption;m(this.caption,"display",i?"":"none"),w(this.caption,i);for(var e=0;e<=this.preload;e++)t.loadItem(t.getIndex(t.index+e)),t.loadItem(t.getIndex(t.index-e))}},{name:"itemload",handler:function(t,i){var e,n=this,o=i.source,a=i.type;if(this.setItem(i,"<span uk-spinner></span>"),o)if("image"===a||o.match(/\.(jp(e)?g|png|gif|svg)$/i))b(o).then(function(t){return n.setItem(i,'<img width="'+t.width+'" height="'+t.height+'" src="'+o+'">')},function(){return n.setError(i)});else if("video"===a||o.match(/\.(mp4|webm|ogv)$/i)){var h=r("<video controls playsinline"+(i.poster?' poster="'+i.poster+'"':"")+' uk-video="autoplay: '+this.videoAutoplay+'"></video>');p(h,"src",o),I(h,"error",function(){return n.setError(i)}),I(h,"loadedmetadata",function(){p(h,{width:h.videoWidth,height:h.videoHeight}),n.setItem(i,h)})}else if("iframe"===a)this.setItem(i,'<iframe class="uk-lightbox-iframe" src="'+o+'" frameborder="0" allowfullscreen></iframe>');else if(e=o.match(/\/\/.*?youtube\.[a-z]+\/watch\?v=([^&\s]+)/)||o.match(/youtu\.be\/(.*)/)){var l=e[1],u=function(t,e){return void 0===t&&(t=640),void 0===e&&(e=450),n.setItem(i,s("//www.youtube.com/embed/"+l,t,e,n.videoAutoplay))};b("//img.youtube.com/vi/"+l+"/maxresdefault.jpg").then(function(t){var i=t.width,e=t.height;120===i&&90===e?b("//img.youtube.com/vi/"+l+"/0.jpg").then(function(t){var i=t.width,e=t.height;return u(i,e)},u):u(i,e)},u)}else(e=o.match(/(\/\/.*?)vimeo\.[a-z]+\/([0-9]+).*?/))&&c("//vimeo.com/api/oembed.json?maxwidth=1920&url="+encodeURI(o),{responseType:"json"}).then(function(t){var o=t.response,a=o.height,r=o.width;return n.setItem(i,s("//player.vimeo.com/video/"+e[2],r,a,n.videoAutoplay))})}}],methods:{toggle:function(){return this.isToggled()?this.hide():this.show()},hide:function(){this.isToggled()&&this.toggleNow(this.$el,!1),A(this.slides,this.clsActive),C.stop(this.slides),delete this.index,delete this.percent,delete this._animation},loadItem:function(t){void 0===t&&(t=this.index);var i=this.getItem(t);i.content||D(this.$el,"itemload",[i])},getItem:function(t){return void 0===t&&(t=this.index),this.items[t]||{}},setItem:function(t,i){f(t,{content:i});var n=w(this.slides[this.items.indexOf(t)],i);D(this.$el,"itemloaded",[this,n]),e.update(null,n)},setError:function(t){this.setItem(t,'<span uk-icon="icon: bolt; ratio: 2"></span>')},showControls:function(){clearTimeout(this.controlsTimer),this.controlsTimer=setTimeout(this.hideControls,this.delayControls),k(this.toolbars,"hidden")&&(n(this.toolbars[0],"uk-animation-slide-top"),n(this.toolbars[1],"uk-animation-slide-bottom"),p(this.nav,"hidden",this.items.length<=1?"":null),this.items.length>1&&n(this.nav,"uk-animation-fade"))},hideControls:function(){k(this.toolbars,"hidden")||(n(this.toolbars[0],"uk-animation-slide-top","out"),n(this.toolbars[1],"uk-animation-slide-bottom","out"),this.items.length>1&&n(this.nav,"uk-animation-fade","out"))}}})}}return"undefined"!=typeof window&&window.UIkit&&window.UIkit.use(i),i});