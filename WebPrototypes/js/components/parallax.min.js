/*! UIkit 3.0.0-beta.30 | http://www.getuikit.com | (c) 2014 - 2017 YOOtheme | MIT License */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("uikitparallax",t):e.UIkitParallax=t()}(this,function(){"use strict";function e(t){function i(e,t){return c(c(e,"color",t),"color").split(/[(),]/g).slice(1,-1).concat(1).slice(0,4).map(function(e){return g(e)})}function r(e,t){return+(f(e.diff)?+e.end:e.start+e.diff*t*(e.start<e.end?1:-1)).toFixed(2)}if(!e.installed){var a=t.mixin,s=t.util,n=s.assign,o=s.clamp,c=s.css,u=s.Dimensions,d=s.each,l=s.getImage,p=s.includes,f=s.isUndefined,h=s.scrolledOver,g=s.toFloat,b=s.query,m=s.win,v=["x","y","bgx","bgy","rotate","scale","color","backgroundColor","borderColor","opacity","blur","hue","grayscale","invert","saturate","sepia","fopacity"];a.parallax={props:v.reduce(function(e,t){return e[t]="list",e},{easing:Number,media:"media"}),defaults:v.reduce(function(e,t){return e[t]=void 0,e},{easing:1,media:!1}),computed:{props:function(e,t){var r=this;return v.reduce(function(a,s){if(f(e[s]))return a;var o=s.match(/color/i),u=o||"opacity"===s,d=e[s];u&&c(t,s,"");var l,h=(f(d[1])?"scale"===s?1:u?c(t,s):0:d[0])||0,b=f(d[1])?d[0]:d[1],m=p(d.join(""),"%")?"%":"px";if(o){var v=t.style.color;h=i(t,h),b=i(t,b),t.style.color=v}else h=g(h),b=g(b),l=Math.abs(h-b);return a[s]={start:h,end:b,diff:l,unit:m},s.match(/^bg/)&&(a[s].pos=c(c(t,"background-position-"+s[2],""),"backgroundPosition").split(" ")["x"===s[2]?0:1],r.covers&&n(a[s],{start:0,end:h<=b?l:-l})),a},{})},bgProps:function(){var e=this;return["bgx","bgy"].filter(function(t){return t in e.props})},covers:function(e,t){return"cover"===c(c(t,"backgroundSize",""),"backgroundSize")}},disconnected:function(){delete this._image},update:[{read:function(){var e=this;if(delete this._computeds.props,this._active=!this.media||m.matchMedia(this.media).matches,this._image&&(this._image.dimEl={width:this.$el.offsetWidth,height:this.$el.offsetHeight}),f(this._image)&&this.covers&&this.bgProps.length){var t=c(this.$el,"backgroundImage").replace(/^none|url\(["']?(.+?)["']?\)$/,"$1");t&&(this._image=!1,l(t).then(function(t){e._image={width:t.naturalWidth,height:t.naturalHeight},e.$emit()}))}},write:function(){var e=this;if(this._image)if(this._active){var t=this._image,i=t.dimEl,r=u.cover(t,i);this.bgProps.forEach(function(a){var s=e.props[a],n=s.start,c=s.end,d=s.pos,l=s.diff,p="bgy"===a?"height":"width",f=r[p]-i[p];if(d.match(/%$/)){if(n>=c)f<l?(i[p]=r[p]+l-f,e.props[a].pos="0px"):(d=-1*f/100*g(d),d=o(d,l-f,0),e.props[a].pos=d+"px");else{if(f<l)i[p]=r[p]+l-f;else if(f/100*g(d)>l)return;e.props[a].pos="-"+l+"px"}r=u.cover(t,i)}}),c(this.$el,{backgroundSize:r.width+"px "+r.height+"px",backgroundRepeat:"no-repeat"})}else c(this.$el,{backgroundSize:"",backgroundRepeat:""})},events:["load","resize"]}],methods:{reset:function(){var e=this;d(this.getCss(0),function(t,i){return c(e.$el,i,"")})},getCss:function(e){var t=!1,i=this.props;return Object.keys(i).reduce(function(a,s){var n=i[s],o=r(n,e);switch(s){case"x":case"y":if(t)break;var c=["x","y"].map(function(t){return s===t?o+n.unit:i[t]?r(i[t],e)+i[t].unit:0}),u=c[0],d=c[1];t=a.transform+=" translate3d("+u+", "+d+", 0)";break;case"rotate":a.transform+=" rotate("+o+"deg)";break;case"scale":a.transform+=" scale("+o+")";break;case"bgy":case"bgx":a["background-position-"+s[2]]="calc("+n.pos+" + "+(o+n.unit)+")";break;case"color":case"backgroundColor":case"borderColor":a[s]="rgba("+n.start.map(function(t,i){return t+=e*(n.end[i]-t),3===i?g(t):parseInt(t,10)}).join(",")+")";break;case"blur":a.filter+=" blur("+o+"px)";break;case"hue":a.filter+=" hue-rotate("+o+"deg)";break;case"fopacity":a.filter+=" opacity("+o+"%)";break;case"grayscale":case"invert":case"saturate":case"sepia":a.filter+=" "+s+"("+o+"%)";break;default:a[s]=o}return a},{transform:"",filter:""})}}},t.component("parallax",{mixins:[a.parallax],props:{target:String,viewport:Number},defaults:{target:!1,viewport:1},computed:{target:function(e,t){var i=e.target;return i&&b(i,t)||t}},disconnected:function(){delete this._prev},update:[{read:function(){delete this._prev}},{read:function(){var e=h(this.target)/(this.viewport||1);this._percent=o(e*(1-(this.easing-this.easing*e)))},write:function(){this._active?this._prev!==this._percent&&(c(this.$el,this.getCss(this._percent)),this._prev=this._percent):this.reset()},events:["scroll","load","resize"]}]})}}return"undefined"!=typeof window&&window.UIkit&&window.UIkit.use(e),e});